<ion-view view-title="{{cooperative.name}}">
  <ion-nav-buttons side="secondary">
    <a ui-sref=".cooperative.my.edit" class="button button-clear button-positive" ng-if="currentUser.cooperativeId == cooperative._id">
      {{'EDIT' | translate}}
    </a>
  </ion-nav-buttons>
  <ion-content>
    <div class="list">
      <div class="item item-body">
        <div class="row">
          <div class="col col-20 text-right">
            <i class="icon flaticon-building80 bigger-2 energy-class-{{cooperative.energyClass}}"></i>
          </div>
          <div class="col">
            {{cooperative.performance}} kWh/m2
          </div>
          <div class="col text-right">
            {{'COOPERATIVE_ENERGY_ACTIONS' | translate}}
          </div>
          <div class="col col-20">
            <span class="bigger-2 energized"><b>{{cooperative.actions.length}}</b></span>
          </div>
        </div>
      </div>
      <div class="item item-no-border-bottom">
        <div class="button-bar">
          <a class="button" ng-class="{active:settings.granularity=='monthly'}" ng-click="changeGranularity('monthly')">{{'COOPERATIVE_DATA_MONTHLY' | translate}}</a>
          <a class="button" ng-class="{active:settings.granularity=='yearly'}" ng-click="changeGranularity('yearly')">{{'COOPERATIVE_DATA_YEARLY' | translate}}</a>
        </div>
        <div class="button-bar padding-top padding-bottom">
          <a class="button" ng-class="{active:settings.type == 'heating'}" ng-click="changeType('heating')">{{'COOPERATIVE_DATA_HEATING' | translate}}</a>
          <a class="button" ng-class="{active:settings.type == 'electricity'}" ng-click="changeType('electricity')">{{'COOPERATIVE_DATA_ELECTRICITY' | translate}}</a>
        </div>
        <div>
         <label class="item item-input item-select">
          <div class="input-label">
            {{'COOPERATIVE_DATA_COMPARE' | translate}}
          </div>
          <select ng-model="settings.compareTo" ng-change="changeComparison()">
            <option ng-repeat="option in comparisons" value="{{option.name}}" translate>{{option.name}}</option>
          </select>
        </label>
        <div class="padding-top">
          <h2>{{'COOPERATIVE_DATA_ENERGY_USE' | translate}} (MWh)</h2>
          <table>
            <tr>
              <td class="padding-horizontal padding-top text-right">
                max:
              </td class="padding-horizontal">
              <td class="electricity">
                <b>{{getMainMax().y | number:2}}</b> ({{getMainMax().x | date:"MMM yyyy"}})
              </td>
              <td class="padding-horizontal" ng-if="settings.compareTo">
                <b>{{getComparedMax().y | number:2}}</b> ({{getComparedMax().x | date:"MMM yyyy"}})
              </td>
            </tr>
            <tr>
              <td class="padding-horizontal text-right">
                min:
              </td class="padding-horizontal">
              <td class="electricity">
                <b>{{getMainMin().y | number:2}}</b> ({{getMainMin().x | date:"MMM yyyy"}})
              </td>
              <td class="padding-horizontal" ng-if="settings.compareTo">
                <b>{{getComparedMin().y | number:2}}</b> ({{getComparedMin().x | date:"MMM yyyy"}})
              </td>
            </tr>
            <tr>
              <td class="padding-horizontal padding-bottom text-right">
                {{'COOPERATIVE_DATA_AVERAGE' | translate}}:
              </td class="padding-horizontal">
              <td class="electricity">
                <b>{{getMainAvg() | number:2}}</b>
              </td>
              <td class="padding-horizontal" ng-if="settings.compareTo">
                <b>{{getComparedAvg() | number:2}}</b>
              </td>
            </tr>
          </table>
        </div>
      </div>
    </div>
      <div class="chart-container">
        <a class="button button-clear button-stable chart-navigation ion-chevron-left" ng-click="move(-1)" ng-disabled="chartConfig.loading" ng-hide="settings.granularity=='yearly'"></a>
        <highchart id="chart" config="chartConfig"></highchart>
        <a class="button button-clear button-stable chart-navigation ion-chevron-right" ng-click="move(1)" ng-disabled="chartConfig.loading" ng-hide="settings.granularity=='yearly'"></a>
      </div>
      <div ng-include src="'app/cooperative/actions.html'"></div>
  </ion-content>
</ion-view>
