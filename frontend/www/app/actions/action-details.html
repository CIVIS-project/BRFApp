<ion-view>
  <ion-nav-title>
    <span class="capitalize">{{actionsType}} Actions ({{_.size(actionsByType())}})</span>
</ion-nav-title>
<ion-content>
<ion-slide-box active-slide="slideIdx" does-continue="false" show-pager="false">
<ion-slide ng-repeat="action in actionsByType() track by $index">

<div class="list card">
  <div class="item item-divider item-text-wrap">
    {{$index + 1}}. {{action.name}}
  </div>
  <div class="item item-body">
    <ng-include src="'app/actions/actionDescription.html'"></ng-include>
    <span class="text-small">You started on {{action.startedDate | date: "yyyy-MM-dd"}}. <a href="#" class="balanced">{{action.participants}} Participant{{action.participants > 1 ? 's' : ''}}.</a> 
    </span>
  </div>
  </div>
</div>

<div class="list card" ng-if="actionsType == 'active'">
  <div class="item item-divider item-text-wrap">
    How are you doing?
   <!--  <i class="icon ion-ios-chatbubble-outline balanced" style="font-size:35px;"></i> -->
  </div>

  <a class="item item-icon-left item-text-wrap" ng-click="actionCompleted(action)">
   <i class="icon ion-android-done positive"></i>
   I have done this<i ng-show="action.category!='oneshot'"> regularly for 3<i class="ion-ios-plus-empty"></i> weeks</i>.
 </a>
 <a class="item item-icon-left" ng-click="actionAbandoned(action)">
  <i class="icon ion-android-close energized"></i>
  I don't want to do this any more.
</a>
</div>

<div class="list card">
  <div class="item item-divider tabs tabs-secondary tabs-icon-left">
    <a class="tab-item" href="#">
      <i class="icon ion-thumbsup"></i>
      {{action.like}} Like
    </a>
    <a class="tab-item" href="#">
      <i class="icon ion-chatbox"></i>
      {{action.comments? _.size(action.comments) : 0 }} Comment{{_.size(action.comments)> 1 ? 's' : ''}}
    </a>
    <a class="tab-item" href="#">
      <i class="icon ion-share"></i>
      {{action.share}} Share
    </a>
  </div>
  <div class="item item-text-wrap">
    <label class="item item-input">
      <textarea type="text" ng-model="comment.text" placeholder="Give your comment ..."></textarea>
    </label>
    <button class="button button-small button-dark right" ng-if="comment.text != ''" ng-click="postComment(action)"> &nbsp; &nbsp; Post &nbsp; &nbsp;</button>
  </div>
  <div class="item item-avatar item-text-wrap" ng-repeat="comment in comments" ng-if="comment.actionId == action._id">
    <img ng-src="img/{{comment.comment}}.jpg"><h3>{{comment.name}} <span class="text-small">{{comment.date| date: "yyyy-MM-dd"}}</span></h3>
    <p>{{comment.comment}}</p>
  </div>
</div>

</ion-slide>
</ion-slide-box>
</ion-content>
</ion-view>
